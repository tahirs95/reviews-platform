{% extends 'vimbiso/home.html' %}
{% load static %}

{% block title %}
    <title>Vimbiso - Profile</title>
{% endblock title %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/review.css' %}"> 
{% endblock head %}

{% block content %}
<!-- Content -->
    <div class="container-fluid m-0 p-0">
        <div class="bg-white flex-row d-flex justify-content-center">
            <img class="border border-dark" src="{{c.profile.image.url}}" style="max-height: 149px;max-width: 198px;">
            <div class="flex-column pl-4">
                <h1>{{c.username}}</h1>
                {% for i in avg_ratings_range  %}
                <span class="fa fa-star checked text-warning"></span>
                {% endfor %}
                <p>Reviews {{reviews|length}}</p>
                <p> Avg ratings: {{avg_ratings}}</p>
            </div>
        </div>
        
        <div class="d-flex">
            <div class="flex-column col-8">
                <div class="theme--light p-5">
                    <div class="comments">
                        <div class="card v-card v-sheet theme--light elevation-2 text-center pt-2" >
                        <h1 class="p-0 mb-4">Reviews chart</h1>
                        <div class="flex-row">
                            <span class="" style="font-size:16px">Excellent</span>
                            <div class="progress w-75 float-right">
                                <div class="progress-bar" role="progressbar" aria-valuenow="100"
                                aria-valuemin="0" aria-valuemax="100" style="width:100%">
                                100
                                </div>
                            </div>
                        </div>
                        <div class="flex-row">
                            <span class="" style="font-size:16px">Great</span>
                            <div class="progress w-75 float-right">
                                <div class="progress-bar" role="progressbar" aria-valuenow="90"
                                aria-valuemin="0" aria-valuemax="100" style="width:90%">
                                90
                                </div>
                            </div>
                        </div>
                        <div class="flex-row">
                            <span class="" style="font-size:16px">Average</span>
                            <div class="progress w-75 float-right">
                                <div class="progress-bar" role="progressbar" aria-valuenow="10"
                                aria-valuemin="0" aria-valuemax="100" style="width:10%">
                                10
                                </div>
                            </div>
                        </div>
                        <div class="flex-row">
                            <span class="" style="font-size:16px">Poor</span>
                            <div class="progress w-75 float-right">
                                <div class="progress-bar" role="progressbar" aria-valuenow="5"
                                aria-valuemin="0" aria-valuemax="100" style="width:5%">
                                5
                                </div>
                            </div>
                        </div>
                        <div class="flex-row">
                            <span class="" style="font-size:16px">Bad</span>
                            <div class="progress w-75 float-right">
                                <div class="progress-bar" role="progressbar" aria-valuenow="2"
                                aria-valuemin="0" aria-valuemax="100" style="width:2%">
                                2
                                </div>
                            </div>
                        </div>
                        </div>
                        <div class="card v-card v-sheet theme--light elevation-2 text-center" ><h1><strong>Recent Reviews</strong></h1>
                        <!---->
                        </div>
                        {% for r in reviews %}
                        <div>
                            {% if r.ratings > 4 %}
                                <div  class="card v-card v-sheet theme--light elevation-2" style="border:3px solid var(--green);border-radius:18px">
                            {% elif r.ratings < 4 and r.ratings > 2.5 %}
                                <div  class="card v-card v-sheet theme--light elevation-2" style="border:3px solid var(--yellow);border-radius:18px">
                            {% else %}
                                <div  class="card v-card v-sheet theme--light elevation-2" style="border:3px solid var(--red);border-radius:18px">
                            {% endif %}
                            
                                <div  class="header">
                                    <div class="actions">
                                        {% for i in r.get_ratings %}
                                        <span class="fa fa-star checked"></span>
                                        {% endfor %}
                                    </div>
                                <div  class="v-avatar avatar" style="height: 50px; width: 50px;"><img  src="https://www.kindpng.com/picc/m/269-2697881_computer-icons-user-clip-art-transparent-png-icon.png">
                                </div>
                                <span  class="displayName title metallic-red">{{r.name}}</span> <span  class="displayName caption">{{r.date_of_purchase}}</span> &nbsp<span><i class="fas fa-map-marker-alt"></i> {{r.branch_location}}</span>
                                
                                <br>
                                </div>
                                <!---->
                                <div  class="wrapper comment">
                                <p>{{r.review}}</p>
                                </div>
                                
                                <div  class="v-dialog__container" style="display: block;"></div>
                            </div>
                            <!---->
                            {% if r.response %}
                            <div  class="answers mb-5">
                                <div class="message from"><span class="response"><strong style="text-transform: uppercase;">{{r.company.username}}: </strong></span>  {{r.response}}</div>
                            </div>
                            {% endif %}
                            
                        </div>
                        {% endfor %}
                        
                        
                    </div>
                </div>
            </div>
            <div class="flex-column col-4 pt-5">
                <div class="card" style="width: 18rem;">
                    <img class="card-img-top" src="{{c.profile.image.url}}" alt="Card image cap" style="max-height:350px">
                    <div class="card-body">
                        <h5 class="card-title metallic-red text-center">About us</h5>
                        <p class="card-text">
                            {{c.profile.description}}
                        </p>
                    </div>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item"><i class="fas fa-map-marker-alt metallic-red"></i> {{c.address}}</li>
                        <li class="list-group-item"><i class="fas fa-phone-square metallic-red"></i> {{c.contact}}</li>
                    </ul>

                </div>
            </div>
        </div>

    </div>
{% endblock content %}